# Анализ и реализация функциональности в Course Service

## 1. Статьи (Articles)

### Структура и функциональность
- **Модель**: `Article` в `app/models/article.py`
  - Основные поля: id, course_id, slug, language, title, description, content, order, is_published
  - Уникальный индекс по комбинации course_id, slug и language
  - Связь с курсом через relationship

- **Схемы**:
  - `ArticleBase` - базовая схема с основными полями
  - `ArticleCreate` - схема для создания статьи
  - `ArticleUpdate` - схема для обновления статьи (все поля опциональны)
  - `ArticleResponse` - схема для ответа с полной информацией о статье
  - `ArticleListResponse` - схема для списка статей с пагинацией

- **Репозиторий** (`ArticleRepository` в `app/repositories/article.py`):
  - `create_article` - создание новой статьи
  - `get_article` - получение статьи по ID
  - `get_article_by_slug` - получение статьи по slug и языку
  - `get_articles` - получение списка статей с фильтрацией и пагинацией
  - `update_article` - обновление статьи
  - `delete_article` - удаление статьи

- **API эндпоинты** (`app/api/endpoints/articles.py`):
  - `POST /` - создание статьи
  - `GET /` - получение списка статей с фильтрацией
  - `GET /{article_id}` - получение статьи по ID
  - `PUT /{article_id}` - обновление статьи
  - `DELETE /{article_id}` - удаление статьи

### Что нужно реализовать/проверить
1. Проверить работу эндпоинтов для создания и получения статей
2. Добавить возможность поиска статей по тегам или ключевым словам
3. Реализовать связь статей с технологическим деревом
4. Добавить счетчик просмотров для статей
5. Реализовать систему комментариев к статьям

## 2. Уроки (Lessons)

### Структура и функциональность
- **Модель**: Уроки представлены в системе и связаны с курсами
  - Основные поля: id, course_id, title, description, content, order, duration, difficulty_level, is_published

- **API эндпоинты** (`app/api/endpoints/lessons.py`):
  - `POST /` - создание урока
  - `GET /` - получение списка уроков с фильтрацией
  - `GET /{lesson_id}` - получение урока по ID
  - `PUT /{lesson_id}` - обновление урока
  - `DELETE /{lesson_id}` - удаление урока
  - `GET /{lesson_id}/progress` - получение прогресса по уроку
  - `POST /{lesson_id}/complete` - отметить урок как завершенный

### Что нужно реализовать/проверить
1. Проверить работу эндпоинтов для создания и получения уроков
2. Реализовать систему отслеживания прогресса по урокам
3. Добавить поддержку различных типов контента в уроках (видео, код, интерактивные элементы)
4. Реализовать систему предварительных требований для уроков
5. Добавить систему оценки уроков пользователями

## 3. Технологическое дерево (Technology Tree)

### Структура и функциональность
- **Модель**: Технологическое дерево представляет собой структуру узлов и связей между ними
  - Узлы (Nodes) - элементы дерева, которые могут представлять уроки, статьи или другой контент
  - Связи (Connections) - определяют зависимости между узлами
  - Группы (Groups) - объединяют узлы в логические группы

- **Схемы**:
  - `NodeBase` - базовая схема для узла с полями id, title, description, position, style, contentId, requirements
  - `Connection` - схема для связи между узлами с полями id, from, to, style, type
  - `Group` - схема для группы узлов с полями id, name, nodes
  - `TechnologyTree` - схема для всего дерева с полями course_id, nodes, connections, groups, metadata

- **API эндпоинты** (`app/api/endpoints/technology_tree.py`):
  - `GET /` - получение технологического дерева для курса
  - `POST /` - создание технологического дерева
  - `PUT /` - обновление технологического дерева
  - `DELETE /` - удаление технологического дерева
  - `PATCH /data` - обновление данных дерева
  - `POST /nodes` - добавление узла в дерево
  - `PUT /nodes/{node_id}` - обновление узла
  - `DELETE /nodes/{node_id}` - удаление узла
  - `GET /nodes/{node_id}` - получение узла
  - `PATCH /publish` - публикация/скрытие дерева
  - `GET /export` - экспорт дерева
  - `POST /import` - импорт дерева

### Что нужно реализовать/проверить
1. Проверить работу эндпоинтов для создания и получения технологического дерева
2. Реализовать визуализацию дерева на клиенте
3. Добавить функциональность для отслеживания прогресса пользователя по дереву
4. Реализовать систему достижений, связанных с прохождением узлов дерева
5. Добавить возможность персонализации дерева для разных пользователей

## План действий

1. **Краткосрочные задачи**:
   - Проверить работу эндпоинтов для уроков (создание, получение, обновление)
   - Реализовать базовую систему отслеживания прогресса по урокам
   - Создать простое технологическое дерево для тестового курса

2. **Среднесрочные задачи**:
   - Интегрировать уроки с технологическим деревом
   - Реализовать систему предварительных требований для уроков
   - Добавить поддержку различных типов контента в уроках

3. **Долгосрочные задачи**:
   - Реализовать полноценную систему достижений
   - Добавить персонализацию технологического дерева
   - Реализовать аналитику по прохождению курсов и уроков

## Полезные ссылки

- API документация: `/docs` или `/redoc` (после запуска сервиса)
- Схемы моделей: `app/schemas/`
- Модели базы данных: `app/models/`
- Репозитории: `app/repositories/`
