# Course Service

Сервис для управления курсами в системе CompEduX.

## Основные функции

- Управление курсами (создание, чтение, обновление, удаление)
- Поиск курсов по различным параметрам
- Хранение метаданных курсов
- Управление тегами курсов
- Хранение roadmap для курсов
- Поддержка мультиязычности через локализации

## Особенности

### Мультиязычность

Мультиязычность реализуется через отдельную модель Localization, где храним структуру:

```json
{
  "en": {
    "course.intro": "Introduction",
    "course.intro.desc": "Getting started with the course"
  },
  "ru": {
    "course.intro": "Введение",
    "course.intro.desc": "Начало работы с курсом"
  }
}
```

Такой подход позволяет:

- Централизованно управлять переводами
- Легко добавлять новые языки
- Использовать ключи для доступа к текстам вместо хранения переводов в каждой сущности

### Короткие URL (slugs)

Каждый курс имеет уникальный короткий идентификатор (slug), который используется в URL:

```
https://example.com/course/zf0QwkTb
```

Slugs автоматически генерируются при создании курса.

### Roadmaps

Для курсов можно создавать roadmaps (карты обучения), которые показывают путь обучения и зависимости между темами.
Roadmaps хранятся в JSON-формате и поддерживают:

- Узлы (темы обучения)
- Связи между узлами
- Стили для визуализации
- Ссылки на текстовые ключи в локализации
- Метаданные (автор, версия и т.д.)

## Модели данных

### Course

- `id` - UUID курса
- `slug` - Короткий URL-идентификатор
- `title` - Название курса
- `description` - Описание курса
- `instructor_id` - UUID инструктора
- `tags` - Связь с тегами (many-to-many)
- `created_at` - Дата создания
- `updated_at` - Дата обновления

### Tag

- `id` - ID тега
- `name_en` - Название тега на английском
- `name_ru` - Название тега на русском
- (другие языки могут быть добавлены как отдельные поля)

### Roadmap

- `id` - UUID roadmap
- `course_id` - Связь с курсом
- `data` - JSON-структура roadmap
- `created_at` - Дата создания
- `updated_at` - Дата обновления

### Localization

- `id` - UUID локализации
- `namespace` - Пространство имен (например, "course_1", "roadmap_2", "global")
- `translations` - JSON со всеми переводами для данного пространства имен
- `created_at` - Дата создания
- `updated_at` - Дата обновления

## Тестовые данные

Для разработки и тестирования имеются функции для создания тестовых данных:

```python
from app.db.test_data import create_test_courses, reset_database

# Создание всех тестовых курсов с roadmaps и локализациями
create_test_courses(force=True, create_roadmaps=True)

# Сброс данных
reset_database()
```

## Запуск тестов

Для тестирования моделей:

```
python -m tests.test_models
```
